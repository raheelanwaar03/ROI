"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6498],{66498:function(e,r,t){class n extends Error{}class i extends Error{constructor(e){let r=function(e){if(e instanceof Error)return e;let r=typeof e;if("undefined"!==r&&"function"!==r&&null!==e){if("object"!==r)return Error(String(e));if(e&&!Array.isArray(e)&&"object"==typeof e){let r=new n;for(let t in e)r[t]=e[t];return r}}}(e.cause),t=e.message??r?.message??e.code;super(t,{cause:r}),this.code=e.code,this.name=this.constructor.name}}var o=t(59881),u=t(14412);let a={_default:!0,input:{serialize:e=>e,deserialize:e=>e},output:{serialize:e=>e,deserialize:e=>e}},s=({shape:e})=>e,c=["query","mutation","subscription"],f={_ctx:null,_errorShape:null,_meta:null,queries:{},mutations:{},subscriptions:{},errorFormatter:s,transformer:a},l=["then"];function d(e){return function(r){let t=new Set(Object.keys(r).filter(e=>l.includes(e)));if(t.size>0)throw Error("Reserved words used in `router({})` call: "+Array.from(t).join(", "));let n=Object.assign(Object.create(null),{});!function e(r,t=""){for(let[i,o]of Object.entries(r??{})){let r=`${t}${i}`;if("router"in o._def){e(o._def.procedures,`${r}.`);continue}if(n[r])throw Error(`Duplicate key: ${r}`);n[r]=o}}(r);let a={_config:e,router:!0,procedures:n,...f,record:r,queries:Object.entries(n).filter(e=>e[1]._def.query).reduce((e,[r,t])=>({...e,[r]:t}),{}),mutations:Object.entries(n).filter(e=>e[1]._def.mutation).reduce((e,[r,t])=>({...e,[r]:t}),{}),subscriptions:Object.entries(n).filter(e=>e[1]._def.subscription).reduce((e,[r,t])=>({...e,[r]:t}),{})},s={...r,_def:a,createCaller(e){let r=(0,o.a)(({path:r,args:t})=>{if(1===r.length&&c.includes(r[0]))return function(e){let{type:r,path:t}=e;if(!(t in e.procedures)||!e.procedures[t]?._def[r])throw new i({code:"NOT_FOUND",message:`No "${r}"-procedure on path "${t}"`});let n=e.procedures[t];return n(e)}({procedures:a.procedures,path:t[0],rawInput:t[1],ctx:e,type:r[0]});let n=r.join("."),o=a.procedures[n],u="query";return o._def.mutation?u="mutation":o._def.subscription&&(u="subscription"),o({path:n,rawInput:t[0],ctx:e,type:u})});return r},getErrorShape(r){let{path:t,error:n}=r,{code:i}=r.error,a={message:n.message,code:u.T[i],data:{code:i,httpStatus:(0,o.g)(n)}};return e.isDev&&"string"==typeof r.error.stack&&(a.data.stack=r.error.stack),"string"==typeof t&&(a.data.path=t),this._def._config.errorFormatter({...r,shape:a})}};return s}}let p="undefined"==typeof window||"Deno"in window||globalThis.process?.env?.NODE_ENV==="test"||!!globalThis.process?.env?.JEST_WORKER_ID||!!globalThis.process?.env?.VITEST_WORKER_ID;function m(e){if("function"==typeof e)return e;if("function"==typeof e.parseAsync)return e.parseAsync.bind(e);if("function"==typeof e.parse)return e.parse.bind(e);if("function"==typeof e.validateSync)return e.validateSync.bind(e);if("function"==typeof e.create)return e.create.bind(e);if("function"==typeof e.assert)return r=>(e.assert(r),r);throw Error("Could not find a validator fn")}function w(e,...r){let t=Object.assign(Object.create(null),e);for(let e of r)for(let r in e){if(r in t&&t[r]!==e[r])throw Error(`Duplicate key ${r}`);t[r]=e[r]}return t}function _(e){return e&&"object"==typeof e&&!Array.isArray(e)}let y="middlewareMarker";function h(e,r){let{middlewares:t=[],inputs:n,meta:i,...o}=r;return E({...w(e,o),inputs:[...e.inputs,...n??[]],middlewares:[...e.middlewares,...t],meta:e.meta&&i?{...e.meta,...i}:i??e.meta})}function E(e={}){let r={inputs:[],middlewares:[],...e};return{_def:r,input(e){let t=m(e);return h(r,{inputs:[e],middlewares:[function(e){let r=async({next:r,rawInput:t,input:n})=>{let o;try{o=await e(t)}catch(e){throw new i({code:"BAD_REQUEST",cause:e})}let u=_(n)&&_(o)?{...n,...o}:o;return r({input:u})};return r._type="input",r}(t)]})},output(e){let t=m(e);return h(r,{output:e,middlewares:[function(e){let r=async({next:r})=>{let t=await r();if(!t.ok)return t;try{let r=await e(t.data);return{...t,data:r}}catch(e){throw new i({message:"Output validation failed",code:"INTERNAL_SERVER_ERROR",cause:e})}};return r._type="output",r}(t)]})},meta:e=>h(r,{meta:e}),unstable_concat:e=>h(r,e._def),use(e){let t="_middlewares"in e?e._middlewares:[e];return h(r,{middlewares:t})},query:e=>g({...r,query:!0},e),mutation:e=>g({...r,mutation:!0},e),subscription:e=>g({...r,subscription:!0},e)}}function g(e,r){let t=h(e,{resolver:r,middlewares:[async function(e){let t=await r(e);return{marker:y,ok:!0,data:t,ctx:e.ctx}}]});return function(e){let r=async function(r){if(!r||!("rawInput"in r))throw Error(v);let t=async(n={index:0,ctx:r.ctx})=>{try{let i=e.middlewares[n.index],o=await i({ctx:n.ctx,type:r.type,path:r.path,rawInput:n.rawInput??r.rawInput,meta:e.meta,input:n.input,next:e=>t({index:n.index+1,ctx:e&&"ctx"in e?{...n.ctx,...e.ctx}:n.ctx,input:e&&"input"in e?e.input:n.input,rawInput:e&&"rawInput"in e?e.rawInput:n.rawInput})});return o}catch(e){return{ok:!1,error:function(e){if(e instanceof i)return e;let r=new i({code:"INTERNAL_SERVER_ERROR",cause:e});return e instanceof Error&&e.stack&&(r.stack=e.stack),r}(e),marker:y}}},n=await t();if(!n)throw new i({code:"INTERNAL_SERVER_ERROR",message:"No result from middlewares - did you forget to `return next()`?"});if(!n.ok)throw n.error;return n.data};return r._def=e,r.meta=e.meta,r}(t._def)}let v=`
If you want to call this function on the server, you do the following:
This is a client-only function.

const caller = appRouter.createCaller({
  /* ... your context */
});

const result = await caller.call('myProcedure', input);
`.trim();function b(...e){let r=w({},...e.map(e=>e._def.record)),t=e.reduce((e,r)=>{if(r._def._config.errorFormatter&&r._def._config.errorFormatter!==s){if(e!==s&&e!==r._def._config.errorFormatter)throw Error("You seem to have several error formatters");return r._def._config.errorFormatter}return e},s),n=e.reduce((e,r)=>{if(r._def._config.transformer&&r._def._config.transformer!==a){if(e!==a&&e!==r._def._config.transformer)throw Error("You seem to have several transformers");return r._def._config.transformer}return e},a),i=d({errorFormatter:t,transformer:n,isDev:e.some(e=>e._def._config.isDev),allowOutsideOfServer:e.some(e=>e._def._config.allowOutsideOfServer),isServer:e.some(e=>e._def._config.isServer),$types:e[0]?._def._config.$types})(r);return i}class O{context(){return new O}meta(){return new O}create(e){return function(e){var r;let t=e?.errorFormatter??s,n="input"in(r=e?.transformer??a)?r:{input:r,output:r},i={transformer:n,isDev:e?.isDev??globalThis.process?.env?.NODE_ENV!=="production",allowOutsideOfServer:e?.allowOutsideOfServer??!1,errorFormatter:t,isServer:e?.isServer??p,$types:(0,o.c)(e=>{throw Error(`Tried to access "$types.${e}" which is not available at runtime`)})};{let r=e?.isServer??p;if(!r&&e?.allowOutsideOfServer!==!0)throw Error("You're trying to use @trpc/server in a non-server environment. This is not supported by default.")}return{_config:i,procedure:E({meta:e?.defaultMeta}),middleware:function(e){return function e(r){return{_middlewares:r,unstable_pipe(t){let n="_middlewares"in t?t._middlewares:[t];return e([...r,...n])}}}([e])},router:d(i),mergeRouters:b}}(e)}}new O}}]);